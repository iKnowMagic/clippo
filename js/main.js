// koffee 1.12.0

/*
00     00   0000000   000  000   000
000   000  000   000  000  0000  000
000000000  000000000  000  000 0 000
000 0 000  000   000  000  000  0000
000   000  000   000  000  000   000
 */
var _, activeApp, app, appIconSync, appName, buffers, childp, clearBuffer, clipboard, clippoWatch, copyIndex, deleteIndex, electron, empty, first, fs, getActiveApp, iconDir, kerror, macClipboardChanged, nativeImage, noon, onClipboardChanged, onWillShowWin, originApp, os, osascript, pasteIndex, pkg, post, prefs, quit, readBuffer, ref, reload, saveAppIcon, saveBuffer, slash, watchClipboard, winClipboardChanged;

ref = require('kxk'), _ = ref._, app = ref.app, childp = ref.childp, empty = ref.empty, first = ref.first, fs = ref.fs, kerror = ref.kerror, noon = ref.noon, os = ref.os, osascript = ref.osascript, post = ref.post, prefs = ref.prefs, slash = ref.slash;

electron = require('electron');

pkg = require('../package.json');

if (os.platform() === 'darwin') {
    appIconSync = require('./appiconsync');
}

app = new app({
    dir: __dirname,
    pkg: pkg,
    shortcut: 'CmdOrCtrl+Alt+V',
    index: 'index.html',
    icon: '../img/app.ico',
    tray: '../img/menu@2x.png',
    about: '../img/about.png',
    onQuit: function() {
        return quit();
    },
    onWillShowWin: function() {
        return onWillShowWin();
    },
    width: 1000,
    height: 1200,
    minWidth: 300,
    minHeight: 200
});

clipboard = electron.clipboard;

nativeImage = electron.nativeImage;

buffers = [];

iconDir = "";

activeApp = "";

originApp = null;

clippoWatch = null;

appName = 'clippo';

post.on('paste', function(index) {
    return pasteIndex(index);
});

post.on('del', function(index) {
    return deleteIndex(index);
});

post.onGet('buffers', function() {
    return buffers;
});

post.on('clearBuffer', function() {
    return clearBuffer();
});

getActiveApp = function() {
    var info, script, wxw;
    if (os.platform() === 'win32') {
        wxw = require('wxw');
        info = first(wxw('info', 'top'));
        appName = slash.base(info.path);
    } else if (os.platform() === 'darwin') {
        script = osascript("tell application \"System Events\"\n    set n to name of first application process whose frontmost is true\nend tell\ndo shell script \"echo \" & n");
        appName = childp.execSync("osascript " + script);
        appName = String(appName).trim();
    }
    return appName;
};

saveAppIcon = function(appName) {
    var iconPath, png;
    iconPath = iconDir + "/" + appName + ".png";
    if (!slash.isFile(iconPath)) {
        png = appIconSync(appName, iconDir, 128);
        if (!png) {
            appName = "clippo";
        }
    }
    return appName;
};

onWillShowWin = function() {
    return activeApp = getActiveApp();
};

winClipboardChanged = function() {
    var exapp, exclude, i, iconPath, len, winInfo, wxw;
    wxw = require('wxw');
    appName = 'clippo';
    winInfo = first(wxw('info', 'top'));
    appName = slash.base(winInfo.path);
    exclude = prefs.get('exclude', ['password-turtle']);
    if (!empty(exclude)) {
        for (i = 0, len = exclude.length; i < len; i++) {
            exapp = exclude[i];
            if (appName.startsWith(exapp)) {
                return;
            }
        }
    }
    iconPath = iconDir + "/" + appName + ".png";
    if (!slash.isFile(iconPath)) {
        wxw('icon', winInfo.path, iconPath);
    }
    return onClipboardChanged();
};

macClipboardChanged = function() {
    var currentApp;
    currentApp = getActiveApp();
    if (currentApp.toLowerCase() === 'electron') {
        currentApp = 'clippo';
    }
    if ((!originApp) && (!currentApp)) {
        originApp = 'clippo';
    }
    saveAppIcon(originApp != null ? originApp : currentApp);
    return onClipboardChanged();
};

onClipboardChanged = function() {
    var b, format, i, imageBuffer, imageData, j, k, len, len1, len2, ref1, text;
    ref1 = clipboard.availableFormats();
    for (i = 0, len = ref1.length; i < len; i++) {
        format = ref1[i];
        if (format.startsWith('image/')) {
            imageBuffer = clipboard.readImage().toPNG();
            imageData = imageBuffer.toString('base64');
            for (j = 0, len1 = buffers.length; j < len1; j++) {
                b = buffers[j];
                if ((b.image != null) && b.image === imageData) {
                    appName = b.app;
                    _.pull(buffers, b);
                    break;
                }
            }
            buffers.push({
                app: appName,
                image: imageData,
                count: buffers.length
            });
            reload(buffers.length - 1);
            return;
        }
    }
    text = clipboard.readText();
    if (text.length && text.trim().length) {
        for (k = 0, len2 = buffers.length; k < len2; k++) {
            b = buffers[k];
            if ((b.text != null) && b.text === text) {
                appName = b.app;
                _.pull(buffers, b);
                break;
            }
        }
        buffers.push({
            app: appName,
            text: text,
            count: buffers.length - 1
        });
        return reload(buffers.length - 1);
    }
};

watchClipboard = function() {
    var cw;
    cw = require('electron-clipboard-watcher');
    if (os.platform() === 'win32') {
        return cw({
            watchDelay: 200,
            onImageChange: winClipboardChanged,
            onTextChange: winClipboardChanged
        });
    } else {
        return cw({
            watchDelay: 200,
            onImageChange: macClipboardChanged,
            onTextChange: macClipboardChanged
        });
    }
};

copyIndex = function(index) {
    var image;
    if ((index < 0) || (index > buffers.length - 1)) {
        return;
    }
    if (buffers[index].image) {
        image = nativeImage.createFromBuffer(new Buffer(buffers[index].image, 'base64'));
        if (!image.isEmpty() && (image.getSize().width * image.getSize().height > 0)) {
            clipboard.writeImage(image, 'image/png');
        }
    }
    if ((buffers[index].text != null) && (buffers[index].text.length > 0)) {
        return clipboard.writeText(buffers[index].text, 'text/plain');
    }
};

pasteIndex = function(index) {
    var paste, ref1, wxw;
    copyIndex(index);
    originApp = (ref1 = buffers.splice(index, 1)[0]) != null ? ref1.app : void 0;
    if (os.platform() === 'win32') {
        wxw = require('wxw');
        paste = function() {
            if (activeApp === 'mintty') {
                return wxw('key', 'ctrl+shift+v');
            } else {
                return wxw('key', 'ctrl+v');
            }
        };
        app.win.close();
        return setTimeout(paste, 20);
    } else if (os.platform() === 'darwin') {
        childp.execSync("osascript " + osascript("tell application \"System Events\" to keystroke tab using command down"));
        return childp.execSync("osascript " + osascript("tell application \"System Events\" to keystroke \"v\" using command down"));
    }
};

deleteIndex = function(index) {
    buffers.splice(index, 1);
    return reload(index - 1);
};

quit = function() {
    saveBuffer();
    return clippoWatch != null ? clippoWatch.kill() : void 0;
};

reload = function(index) {
    if (index == null) {
        index = 0;
    }
    return post.toWins('loadBuffers', buffers, index);
};

clearBuffer = function() {
    buffers = [];
    saveBuffer();
    return reload();
};

saveBuffer = function() {
    return noon.save(app.userData + "/buffers.noon", buffers.slice(-prefs.get('maxBuffers', 50)));
};

readBuffer = function() {
    try {
        buffers = noon.load(slash.path(app.userData + "/buffers.noon"));
        return buffers = buffers != null ? buffers : [];
    } catch (error) {
        return buffers = [];
    }
};

post.on('appReady', function() {
    var err;
    readBuffer();
    iconDir = slash.resolve(app.userData + "/icons");
    fs.ensureDirSync(iconDir);
    try {
        fs.accessSync(slash.join(iconDir, 'clippo.png'), fs.R_OK);
    } catch (error) {
        try {
            fs.copySync(__dirname + "/../img/clippo.png", slash.join(iconDir, 'clippo.png'));
        } catch (error) {
            err = error;
            kerror("can't copy clippo icon: " + err);
        }
    }
    return watchClipboard();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuLi9jb2ZmZWUiLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBOztBQVFBLE1BQXdGLE9BQUEsQ0FBUSxLQUFSLENBQXhGLEVBQUUsU0FBRixFQUFLLGFBQUwsRUFBVSxtQkFBVixFQUFrQixpQkFBbEIsRUFBeUIsaUJBQXpCLEVBQWdDLFdBQWhDLEVBQW9DLG1CQUFwQyxFQUE0QyxlQUE1QyxFQUFrRCxXQUFsRCxFQUFzRCx5QkFBdEQsRUFBaUUsZUFBakUsRUFBdUUsaUJBQXZFLEVBQThFOztBQUU5RSxRQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsR0FBQSxHQUFXLE9BQUEsQ0FBUSxpQkFBUjs7QUFFWCxJQUFHLEVBQUUsQ0FBQyxRQUFILENBQUEsQ0FBQSxLQUFpQixRQUFwQjtJQUNJLFdBQUEsR0FBYyxPQUFBLENBQVEsZUFBUixFQURsQjs7O0FBR0EsR0FBQSxHQUFNLElBQUksR0FBSixDQUNGO0lBQUEsR0FBQSxFQUFZLFNBQVo7SUFDQSxHQUFBLEVBQVksR0FEWjtJQUVBLFFBQUEsRUFBWSxpQkFGWjtJQUdBLEtBQUEsRUFBWSxZQUhaO0lBSUEsSUFBQSxFQUFZLGdCQUpaO0lBS0EsSUFBQSxFQUFZLG9CQUxaO0lBTUEsS0FBQSxFQUFZLGtCQU5aO0lBT0EsTUFBQSxFQUFlLFNBQUE7ZUFBRyxJQUFBLENBQUE7SUFBSCxDQVBmO0lBUUEsYUFBQSxFQUFlLFNBQUE7ZUFBRyxhQUFBLENBQUE7SUFBSCxDQVJmO0lBU0EsS0FBQSxFQUFZLElBVFo7SUFVQSxNQUFBLEVBQVksSUFWWjtJQVdBLFFBQUEsRUFBWSxHQVhaO0lBWUEsU0FBQSxFQUFZLEdBWlo7Q0FERTs7QUFlTixTQUFBLEdBQWdCLFFBQVEsQ0FBQzs7QUFDekIsV0FBQSxHQUFnQixRQUFRLENBQUM7O0FBQ3pCLE9BQUEsR0FBZ0I7O0FBQ2hCLE9BQUEsR0FBZ0I7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LGNBQUEsQ0FBQTtBQWZnQixDQUFwQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDBcbjAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMFxuMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDBcbiMjI1xuXG57IF8sIGFwcCwgY2hpbGRwLCBlbXB0eSwgZmlyc3QsIGZzLCBrZXJyb3IsIG5vb24sIG9zLCBvc2FzY3JpcHQsIHBvc3QsIHByZWZzLCBzbGFzaCB9ID0gcmVxdWlyZSAna3hrJ1xuXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xucGtnICAgICAgPSByZXF1aXJlICcuLi9wYWNrYWdlLmpzb24nXG5cbmlmIG9zLnBsYXRmb3JtKCkgPT0gJ2RhcndpbidcbiAgICBhcHBJY29uU3luYyA9IHJlcXVpcmUgJy4vYXBwaWNvbnN5bmMnXG5cbmFwcCA9IG5ldyBhcHBcbiAgICBkaXI6ICAgICAgICBfX2Rpcm5hbWVcbiAgICBwa2c6ICAgICAgICBwa2dcbiAgICBzaG9ydGN1dDogICAnQ21kT3JDdHJsK0FsdCtWJ1xuICAgIGluZGV4OiAgICAgICdpbmRleC5odG1sJ1xuICAgIGljb246ICAgICAgICcuLi9pbWcvYXBwLmljbydcbiAgICB0cmF5OiAgICAgICAnLi4vaW1nL21lbnVAMngucG5nJ1xuICAgIGFib3V0OiAgICAgICcuLi9pbWcvYWJvdXQucG5nJ1xuICAgIG9uUXVpdDogICAgICAgIC0+IHF1aXQoKVxuICAgIG9uV2lsbFNob3dXaW46IC0+IG9uV2lsbFNob3dXaW4oKVxuICAgIHdpZHRoOiAgICAgIDEwMDBcbiAgICBoZWlnaHQ6ICAgICAxMjAwXG4gICAgbWluV2lkdGg6ICAgMzAwXG4gICAgbWluSGVpZ2h0OiAgMjAwXG5cbmNsaXBib2FyZCAgICAgPSBlbGVjdHJvbi5jbGlwYm9hcmRcbm5hdGl2ZUltYWdlICAgPSBlbGVjdHJvbi5uYXRpdmVJbWFnZVxuYnVmZmVycyAgICAgICA9IFtdXG5pY29uRGlyICAgICAgID0gXCJcIlxuYWN0aXZlQXBwICAgICA9IFwiXCJcbm9yaWdpbkFwcCAgICAgPSBudWxsXG5jbGlwcG9XYXRjaCAgID0gbnVsbFxuYXBwTmFtZSAgICAgICA9ICdjbGlwcG8nXG5cbiMgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMDBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDBcbiMgMDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAwMDBcbiMgMDAwICAgICAgICAwMDAgICAwMDAgICAgICAgMDAwICAgICAwMDBcbiMgMDAwICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgICAwMDBcblxucG9zdC5vbiAncGFzdGUnICAgICAgKGluZGV4KSAtPiBwYXN0ZUluZGV4IGluZGV4XG5wb3N0Lm9uICdkZWwnICAgICAgICAoaW5kZXgpIC0+IGRlbGV0ZUluZGV4IGluZGV4XG5wb3N0Lm9uR2V0ICdidWZmZXJzJyAoKSAgICAgIC0+IGJ1ZmZlcnNcbnBvc3Qub24gJ2NsZWFyQnVmZmVyJyAgICAgICAgLT4gY2xlYXJCdWZmZXIoKVxuXG4jIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDBcbiMwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDBcbiMwMDAwMDAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAwMDAgICAwMDAwMDAwXG4jMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgMDAwXG4jMDAwICAgMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAgICAwICAgICAgMDAwMDAwMDBcblxuZ2V0QWN0aXZlQXBwID0gLT5cblxuICAgIGlmIG9zLnBsYXRmb3JtKCkgPT0gJ3dpbjMyJ1xuICAgICAgICB3eHcgPSByZXF1aXJlICd3eHcnXG4gICAgICAgIGluZm8gPSBmaXJzdCB3eHcgJ2luZm8nICd0b3AnXG4gICAgICAgIGFwcE5hbWUgPSBzbGFzaC5iYXNlIGluZm8ucGF0aFxuICAgIGVsc2UgaWYgb3MucGxhdGZvcm0oKSA9PSAnZGFyd2luJ1xuICAgICAgICBzY3JpcHQgPSBvc2FzY3JpcHQgXCJcIlwiXG4gICAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCJcbiAgICAgICAgICAgIHNldCBuIHRvIG5hbWUgb2YgZmlyc3QgYXBwbGljYXRpb24gcHJvY2VzcyB3aG9zZSBmcm9udG1vc3QgaXMgdHJ1ZVxuICAgICAgICBlbmQgdGVsbFxuICAgICAgICBkbyBzaGVsbCBzY3JpcHQgXCJlY2hvIFwiICYgblxuICAgICAgICBcIlwiXCJcbiAgICAgICAgYXBwTmFtZSA9IGNoaWxkcC5leGVjU3luYyBcIm9zYXNjcmlwdCAje3NjcmlwdH1cIlxuICAgICAgICBhcHBOYW1lID0gU3RyaW5nKGFwcE5hbWUpLnRyaW0oKVxuICAgIGFwcE5hbWVcblxuIyAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwXG4jMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwICAwMDBcbiMwMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwXG4jMDAwICAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDBcblxuc2F2ZUFwcEljb24gPSAoYXBwTmFtZSkgLT5cblxuICAgIGljb25QYXRoID0gXCIje2ljb25EaXJ9LyN7YXBwTmFtZX0ucG5nXCJcbiAgICBpZiBub3Qgc2xhc2guaXNGaWxlIGljb25QYXRoXG4gICAgICAgIHBuZyA9IGFwcEljb25TeW5jIGFwcE5hbWUsIGljb25EaXIsIDEyOFxuICAgICAgICBhcHBOYW1lID0gXCJjbGlwcG9cIiBpZiBub3QgcG5nXG4gICAgYXBwTmFtZVxuXG5vbldpbGxTaG93V2luID0gLT5cbiAgICBcbiAgICBhY3RpdmVBcHAgPSBnZXRBY3RpdmVBcHAoKVxuICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwICBcbiMgMDAwIDAgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgICAgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4jIDAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDAgICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiMgMDAgICAgIDAwICAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAgICAgIDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgXG5cbndpbkNsaXBib2FyZENoYW5nZWQgPSAtPlxuXG4gICAgd3h3ID0gcmVxdWlyZSAnd3h3J1xuICAgIGFwcE5hbWUgPSAnY2xpcHBvJ1xuICAgIFxuICAgIHdpbkluZm8gPSBmaXJzdCB3eHcgJ2luZm8nICd0b3AnXG5cbiAgICBhcHBOYW1lID0gc2xhc2guYmFzZSB3aW5JbmZvLnBhdGhcbiAgICBleGNsdWRlID0gcHJlZnMuZ2V0ICdleGNsdWRlJyBbJ3Bhc3N3b3JkLXR1cnRsZSddXG4gICAgaWYgbm90IGVtcHR5IGV4Y2x1ZGVcbiAgICAgICAgZm9yIGV4YXBwIGluIGV4Y2x1ZGVcbiAgICAgICAgICAgIHJldHVybiBpZiBhcHBOYW1lLnN0YXJ0c1dpdGggZXhhcHBcbiAgICBpY29uUGF0aCA9IFwiI3tpY29uRGlyfS8je2FwcE5hbWV9LnBuZ1wiXG4gICAgaWYgbm90IHNsYXNoLmlzRmlsZSBpY29uUGF0aFxuICAgICAgICB3eHcgJ2ljb24nIHdpbkluZm8ucGF0aCwgaWNvblBhdGhcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgb25DbGlwYm9hcmRDaGFuZ2VkKClcblxubWFjQ2xpcGJvYXJkQ2hhbmdlZCA9IC0+XG5cbiAgICBjdXJyZW50QXBwID0gZ2V0QWN0aXZlQXBwKClcbiAgICBjdXJyZW50QXBwID0gJ2NsaXBwbycgaWYgY3VycmVudEFwcC50b0xvd2VyQ2FzZSgpID09ICdlbGVjdHJvbidcbiAgICBvcmlnaW5BcHAgID0gJ2NsaXBwbycgaWYgKG5vdCBvcmlnaW5BcHApIGFuZCAobm90IGN1cnJlbnRBcHApXG5cbiAgICBzYXZlQXBwSWNvbiBvcmlnaW5BcHAgPyBjdXJyZW50QXBwXG5cbiAgICBvbkNsaXBib2FyZENoYW5nZWQoKVxuICAgIFxub25DbGlwYm9hcmRDaGFuZ2VkID0gLT5cblxuICAgIGZvciBmb3JtYXQgaW4gY2xpcGJvYXJkLmF2YWlsYWJsZUZvcm1hdHMoKVxuXG4gICAgICAgIGlmIGZvcm1hdC5zdGFydHNXaXRoICdpbWFnZS8nXG5cbiAgICAgICAgICAgIGltYWdlQnVmZmVyID0gY2xpcGJvYXJkLnJlYWRJbWFnZSgpLnRvUE5HKClcbiAgICAgICAgICAgIGltYWdlRGF0YSAgID0gaW1hZ2VCdWZmZXIudG9TdHJpbmcoJ2Jhc2U2NCcpXG5cbiAgICAgICAgICAgIGZvciBiIGluIGJ1ZmZlcnNcbiAgICAgICAgICAgICAgICBpZiBiLmltYWdlPyBhbmQgYi5pbWFnZSA9PSBpbWFnZURhdGFcbiAgICAgICAgICAgICAgICAgICAgYXBwTmFtZSA9IGIuYXBwXG4gICAgICAgICAgICAgICAgICAgIF8ucHVsbCBidWZmZXJzLCBiXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaFxuICAgICAgICAgICAgICAgIGFwcDogICBhcHBOYW1lXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGltYWdlRGF0YVxuICAgICAgICAgICAgICAgIGNvdW50OiBidWZmZXJzLmxlbmd0aFxuXG4gICAgICAgICAgICByZWxvYWQgYnVmZmVycy5sZW5ndGgtMVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICB0ZXh0ID0gY2xpcGJvYXJkLnJlYWRUZXh0KClcblxuICAgIGlmIHRleHQubGVuZ3RoIGFuZCB0ZXh0LnRyaW0oKS5sZW5ndGhcblxuICAgICAgICBmb3IgYiBpbiBidWZmZXJzXG4gICAgICAgICAgICBpZiBiLnRleHQ/IGFuZCBiLnRleHQgPT0gdGV4dFxuICAgICAgICAgICAgICAgIGFwcE5hbWUgPSBiLmFwcFxuICAgICAgICAgICAgICAgIF8ucHVsbCBidWZmZXJzLCBiXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBidWZmZXJzLnB1c2hcbiAgICAgICAgICAgIGFwcDogICBhcHBOYW1lXG4gICAgICAgICAgICB0ZXh0OiAgdGV4dFxuICAgICAgICAgICAgY291bnQ6IGJ1ZmZlcnMubGVuZ3RoLTFcblxuICAgICAgICByZWxvYWQgYnVmZmVycy5sZW5ndGgtMVxuXG53YXRjaENsaXBib2FyZCA9IC0+XG4gICAgXG4gICAgY3cgPSByZXF1aXJlICdlbGVjdHJvbi1jbGlwYm9hcmQtd2F0Y2hlcidcblxuICAgIGlmIG9zLnBsYXRmb3JtKCkgPT0gJ3dpbjMyJ1xuICAgICAgICBjdyB3YXRjaERlbGF5OjIwMCwgb25JbWFnZUNoYW5nZTp3aW5DbGlwYm9hcmRDaGFuZ2VkLCBvblRleHRDaGFuZ2U6d2luQ2xpcGJvYXJkQ2hhbmdlZFxuICAgIGVsc2VcbiAgICAgICAgY3cgd2F0Y2hEZWxheToyMDAsIG9uSW1hZ2VDaGFuZ2U6bWFjQ2xpcGJvYXJkQ2hhbmdlZCwgb25UZXh0Q2hhbmdlOm1hY0NsaXBib2FyZENoYW5nZWRcblxuIyAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAgMDAwXG4jMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwIDAwMFxuIzAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAwMDAwMFxuIzAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgMDAwXG4jIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgICAgICAwMDBcblxuY29weUluZGV4ID0gKGluZGV4KSAtPlxuXG4gICAgcmV0dXJuIGlmIChpbmRleCA8IDApIG9yIChpbmRleCA+IGJ1ZmZlcnMubGVuZ3RoLTEpXG4gICAgaWYgYnVmZmVyc1tpbmRleF0uaW1hZ2VcbiAgICAgICAgaW1hZ2UgPSBuYXRpdmVJbWFnZS5jcmVhdGVGcm9tQnVmZmVyIG5ldyBCdWZmZXIgYnVmZmVyc1tpbmRleF0uaW1hZ2UsICdiYXNlNjQnXG4gICAgICAgIGlmIG5vdCBpbWFnZS5pc0VtcHR5KCkgYW5kIChpbWFnZS5nZXRTaXplKCkud2lkdGggKiBpbWFnZS5nZXRTaXplKCkuaGVpZ2h0ID4gMClcbiAgICAgICAgICAgIGNsaXBib2FyZC53cml0ZUltYWdlIGltYWdlLCAgJ2ltYWdlL3BuZydcbiAgICBpZiBidWZmZXJzW2luZGV4XS50ZXh0PyBhbmQgKGJ1ZmZlcnNbaW5kZXhdLnRleHQubGVuZ3RoID4gMClcbiAgICAgICAgY2xpcGJvYXJkLndyaXRlVGV4dCBidWZmZXJzW2luZGV4XS50ZXh0LCAndGV4dC9wbGFpbidcblxuIzAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDBcbiMwMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMFxuIzAwMCAgICAgICAgMDAwICAgMDAwICAgICAgIDAwMCAgICAgMDAwICAgICAwMDBcbiMwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDBcblxucGFzdGVJbmRleCA9IChpbmRleCkgLT5cblxuICAgIGNvcHlJbmRleCBpbmRleFxuICAgIG9yaWdpbkFwcCA9IGJ1ZmZlcnMuc3BsaWNlKGluZGV4LCAxKVswXT8uYXBwXG5cbiAgICBpZiBvcy5wbGF0Zm9ybSgpID09ICd3aW4zMidcbiAgICAgICAgd3h3ID0gcmVxdWlyZSAnd3h3J1xuICAgICAgICBwYXN0ZSA9IC0+XG4gICAgICAgICAgICBpZiBhY3RpdmVBcHAgPT0gJ21pbnR0eSdcbiAgICAgICAgICAgICAgICB3eHcgJ2tleScgJ2N0cmwrc2hpZnQrdidcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB3eHcgJ2tleScgJ2N0cmwrdidcbiAgICAgICAgYXBwLndpbi5jbG9zZSgpXG4gICAgICAgIHNldFRpbWVvdXQgcGFzdGUsIDIwXG4gICAgZWxzZSBpZiBvcy5wbGF0Zm9ybSgpID09ICdkYXJ3aW4nXG4gICAgICAgIGNoaWxkcC5leGVjU3luYyBcIm9zYXNjcmlwdCBcIiArIG9zYXNjcmlwdCBcIlwiXCJcbiAgICAgICAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5c3Ryb2tlIHRhYiB1c2luZyBjb21tYW5kIGRvd25cbiAgICAgICAgXCJcIlwiXG4gICAgICAgIGNoaWxkcC5leGVjU3luYyBcIm9zYXNjcmlwdCBcIiArIG9zYXNjcmlwdCBcIlwiXCJcbiAgICAgICAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5c3Ryb2tlIFwidlwiIHVzaW5nIGNvbW1hbmQgZG93blxuICAgICAgICBcIlwiXCJcblxuIzAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMFxuIzAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMDAwMDBcblxuZGVsZXRlSW5kZXggPSAoaW5kZXgpIC0+XG5cbiAgICBidWZmZXJzLnNwbGljZSBpbmRleCwgMVxuICAgIHJlbG9hZCBpbmRleC0xXG5cbnF1aXQgPSAtPlxuXG4gICAgc2F2ZUJ1ZmZlcigpXG4gICAgY2xpcHBvV2F0Y2g/LmtpbGwoKVxuXG5yZWxvYWQgPSAoaW5kZXg9MCkgLT5cblxuICAgIHBvc3QudG9XaW5zICdsb2FkQnVmZmVycycsIGJ1ZmZlcnMsIGluZGV4XG5cbmNsZWFyQnVmZmVyID0gLT5cblxuICAgIGJ1ZmZlcnMgPSBbXVxuICAgIHNhdmVCdWZmZXIoKVxuICAgIHJlbG9hZCgpXG5cbnNhdmVCdWZmZXIgPSAtPlxuXG4gICAgbm9vbi5zYXZlIFwiI3thcHAudXNlckRhdGF9L2J1ZmZlcnMubm9vblwiLCBidWZmZXJzLnNsaWNlKC0gcHJlZnMuZ2V0KCdtYXhCdWZmZXJzJywgNTApKVxuXG5yZWFkQnVmZmVyID0gLT5cblxuICAgIHRyeVxuICAgICAgICBidWZmZXJzID0gbm9vbi5sb2FkIHNsYXNoLnBhdGggXCIje2FwcC51c2VyRGF0YX0vYnVmZmVycy5ub29uXCJcbiAgICAgICAgYnVmZmVycyA9IGJ1ZmZlcnMgPyBbXVxuICAgIGNhdGNoXG4gICAgICAgIGJ1ZmZlcnMgPSBbXVxuXG4jMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMCAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwIDAwMFxuIzAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwICAgMDAwICAgIDAwMDAwXG4jMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgICAwMDBcblxucG9zdC5vbiAnYXBwUmVhZHknLCAtPlxuXG4gICAgcmVhZEJ1ZmZlcigpXG5cbiAgICBpY29uRGlyID0gc2xhc2gucmVzb2x2ZSBcIiN7YXBwLnVzZXJEYXRhfS9pY29uc1wiXG4gICAgZnMuZW5zdXJlRGlyU3luYyBpY29uRGlyXG5cbiAgICB0cnlcbiAgICAgICAgZnMuYWNjZXNzU3luYyBzbGFzaC5qb2luKGljb25EaXIsICdjbGlwcG8ucG5nJyksIGZzLlJfT0tcbiAgICBjYXRjaFxuICAgICAgICB0cnlcbiAgICAgICAgICAgIGZzLmNvcHlTeW5jIFwiI3tfX2Rpcm5hbWV9Ly4uL2ltZy9jbGlwcG8ucG5nXCIsIHNsYXNoLmpvaW4gaWNvbkRpciwgJ2NsaXBwby5wbmcnXG4gICAgICAgIGNhdGNoIGVyclxuICAgICAgICAgICAga2Vycm9yIFwiY2FuJ3QgY29weSBjbGlwcG8gaWNvbjogI3tlcnJ9XCJcblxuICAgIHdhdGNoQ2xpcGJvYXJkKClcbiJdfQ==
//# sourceURL=../coffee/main.coffee